# 6-27

## 这周做了什么？

在工作上，我转到新的部门：
1. 新接触了kratos微服务框架，真正接触项目中grpc
2. 学会编写launch.json，使用vscode对项目调试
3. 通过接口调试了解接口，了解项目中api验签的方法

在业余兴趣上：
1. 爬日语日语网站，制作日语语法数据库
2. 重新编写b站动态解析，做成库
3. 把midi和txt的转换做成库
   
## 问题

1. 处理go爬虫过程中，http异常导致程序崩溃的问题
之前我的写的bilibilipush插件从主分支下架了，原因是太多人提bug，然后我又不处理，其实我是很懵逼的，首先我不知道有这么多人提bug，issue没几个，然后是我自己用的还算舒服，最后就是也没和我讨论，就把插件下了，经典不想处理问题，就处理问题的来源。

一开始，我在项目中也看到自己的这部分代码删掉了，就算默许他了？现在重新提起来还是有点气的，不知道他夸大还是事实，我真不知道有这么多人提bug。查issue，想起来了，我一年都没想好解决方法的终极问题，就是如何解决协程里http异常，导致程序崩溃问题。我想，bilibilipush主要是这个问题，因为有些人可能网络不好，然后开协程就程序就崩溃了，我自己做go爬虫也出现了这个问题，现在就是没有一个成熟的解决方案。

2. 将zbp的引擎和插件分离
zerobot-plugin，如果想从物理上禁用插件，必须改代码，注释掉插件的引用，因此还是没有做到代码和配置分离，就是插件作为程序的配置使用，增加去掉插件不需要改引擎，今天搜了一下go有一个很老shared object创建插件的方法，我自己设想的是k8s搞那种yaml配置文件，添加插件，或者找到一种go调用外部程序的方式。
 
 
## 想做的事
1. 解决上面的两个问题，特别http异常导致panic的问题
2. 学习context包，控制goroutine启动和关闭
3. 学习日语，拿日语n2证书，很久没沉浸下来学了

zbp：
1. 服务列表，详情按字典序排序，展示命令权限
2. 爬日语学习网站音频，做成插件
3. 做问答的插件
4. 小作文替换成api （优先）
5. b站动态，直播，音频，文章解析 （优先）
6. 根据b站关注列表，构建用户关系网，查小团体（这个要画图非常花时间）
7. 制作gif表情包（也是苦力活）


